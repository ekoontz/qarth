<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>qarth.friend documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Qarth 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="qarth.auth.html"><span>qarth.auth</span></a></li><li class="current"><a href="qarth.friend.html"><span>qarth.friend</span></a></li><li><a href="qarth.impl.facebook.html"><span>qarth.impl.facebook</span></a></li><li><a href="qarth.impl.github.html"><span>qarth.impl.github</span></a></li><li><a href="qarth.impl.google.html"><span>qarth.impl.google</span></a></li><li><a href="qarth.impl.scribe.html"><span>qarth.impl.scribe</span></a></li><li><a href="qarth.impl.yahoo.html"><span>qarth.impl.yahoo</span></a></li><li><a href="qarth.oauth.html"><span>qarth.oauth</span></a></li><li><a href="qarth.oauth.lib.html"><span>qarth.oauth.lib</span></a></li><li><a href="qarth.util.html"><span>qarth.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="qarth.friend.html#var-auth-record"><span>auth-record</span></a></li><li><a href="qarth.friend.html#var-oauth-workflow"><span>oauth-workflow</span></a></li><li><a href="qarth.friend.html#var-requestor"><span>requestor</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>qarth.friend documentation</h2><pre class="doc">Friend workflows for Qarth.
</pre><div class="public" id="var-auth-record"><h3>auth-record</h3><div class="usage"><code>(auth-record req)</code></div><pre class="doc">Looks for a qarth auth record in the Friend authentications.
Returns it, or nil if not found.</pre><div class="src-link"><a href="http://github.com/eightnotrump/qarth/blob/master/src/qarth/friend.clj#L19">Source</a></div></div><div class="public" id="var-oauth-workflow"><h3>oauth-workflow</h3><div class="usage"><code>(oauth-workflow {:keys [service key auth-url credential-fn redirect-on-auth? login-url login-uri login-failure-handler], :as params})</code></div><pre class="doc">Creates a Friend  using a Qarth service.

Required arguments:
service -- the auth service
auth-url -- A dual purpose URL. This starts both the OAuth workflow
(so a login button, for example, should redirect here)
and serves as the auth callback.
It should be the same as the callback in your auth service.

Optional arguments:
login-url or login-uri -- a URL to redirect to if a user is not logged in.
(The default Friend :login-uri is /login.)
key -- for multi-services. Can also be passed as a query param, &quot;service&quot;.
credential-fn -- override the Friend credential fn.
The default Friend credential-fn, for some reason, returns nil.
The credential map supplied is of the form
{::qarth.oauth/record auth-record, :identity ::qarth.oauth/anonymous}.
redirect-on-auth? -- the Friend redirect on auth setting, default true
login-failure-handler -- the login failure handler.
The default is to redirect to the configured login-url.
Failure also logs an exception and clears the current auth record.

Exceptions are logged and treated as auth failures.</pre><div class="src-link"><a href="http://github.com/eightnotrump/qarth/blob/master/src/qarth/friend.clj#L36">Source</a></div></div><div class="public" id="var-requestor"><h3>requestor</h3><div class="usage"><code>(requestor req service)</code></div><pre class="doc">Get an auth requestor from a Friend-authenticated request and a service.
</pre><div class="src-link"><a href="http://github.com/eightnotrump/qarth/blob/master/src/qarth/friend.clj#L30">Source</a></div></div></div></body></html>